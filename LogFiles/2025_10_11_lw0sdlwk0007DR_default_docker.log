2025-10-11T01:25:24.6506870Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:25:24.6506932Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:25:24.6506988Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:25:24.6507046Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:25:24.6507104Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:25:24.6507161Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 36
2025-10-11T01:25:24.6507253Z          at MenuApi.DirectFunctionExecutor.ExecuteAsync(FunctionContext context) in /src/obj/Release/net8.0/Microsoft.Azure.Functions.Worker.Sdk.Generators/Microsoft.Azure.Functions.Worker.Sdk.Generators.FunctionExecutorGenerator/GeneratedFunctionExecutor.g.cs:line 38
2025-10-11T01:25:24.6507320Z          at Microsoft.Azure.Functions.Worker.OutputBindings.OutputBindingsMiddleware.Invoke(FunctionContext context, FunctionExecutionDelegate next) in D:\a\_work\1\s\src\DotNetWorker.Core\OutputBindings\OutputBindingsMiddleware.cs:line 13
2025-10-11T01:25:24.6507380Z          at Microsoft.Azure.Functions.Worker.FunctionsApplication.InvokeFunctionAsync(FunctionContext context) in D:\a\_work\1\s\src\DotNetWorker.Core\FunctionsApplication.cs:line 77
2025-10-11T01:25:24.6507441Z          at Microsoft.Azure.Functions.Worker.Handlers.InvocationHandler.InvokeAsync(InvocationRequest request) in D:\a\_work\1\s\src\DotNetWorker.Grpc\Handlers\InvocationHandler.cs:line 88
2025-10-11T01:25:24.6507493Z       ClientConnectionId:2d9a618a-fd66-4800-937c-6929e38a497b
2025-10-11T01:25:24.6507542Z       Error Number:208,State:1,Class:16
2025-10-11T01:25:24.6507595Z       ClientConnectionId before routing:8e5afdae-99b9-4b91-8831-06b2178af67f
2025-10-11T01:25:24.6507648Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:25:24.6507703Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:25:24.6507757Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:25:24.6507833Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:25:24.6507884Z       --- End of stack trace from previous location ---
2025-10-11T01:25:24.6507940Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:25:24.6507995Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:25:24.6509548Z       --- End of stack trace from previous location ---
2025-10-11T01:25:24.6509666Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:25:24.6509728Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:25:24.6509788Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:25:24.6509888Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:25:24.6509947Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:25:24.6510006Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:25:24.6510064Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:25:24.6510117Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 36
2025-10-11T01:25:24.6510187Z          at MenuApi.DirectFunctionExecutor.ExecuteAsync(FunctionContext context) in /src/obj/Release/net8.0/Microsoft.Azure.Functions.Worker.Sdk.Generators/Microsoft.Azure.Functions.Worker.Sdk.Generators.FunctionExecutorGenerator/GeneratedFunctionExecutor.g.cs:line 38
2025-10-11T01:25:24.6510252Z          at Microsoft.Azure.Functions.Worker.OutputBindings.OutputBindingsMiddleware.Invoke(FunctionContext context, FunctionExecutionDelegate next) in D:\a\_work\1\s\src\DotNetWorker.Core\OutputBindings\OutputBindingsMiddleware.cs:line 13
2025-10-11T01:25:24.6510312Z          at Microsoft.Azure.Functions.Worker.FunctionsApplication.InvokeFunctionAsync(FunctionContext context) in D:\a\_work\1\s\src\DotNetWorker.Core\FunctionsApplication.cs:line 77
2025-10-11T01:25:24.6510393Z          at Microsoft.Azure.Functions.Worker.Handlers.InvocationHandler.InvokeAsync(InvocationRequest request) in D:\a\_work\1\s\src\DotNetWorker.Grpc\Handlers\InvocationHandler.cs:line 88
2025-10-11T01:25:24.6510460Z          at Microsoft.Azure.WebJobs.Script.Description.WorkerFunctionInvoker.InvokeCore(Object[] parameters, FunctionInvocationContext context) in /_/src/WebJobs.Script/Description/Workers/WorkerFunctionInvoker.cs:line 101
2025-10-11T01:25:24.6510520Z          at Microsoft.Azure.WebJobs.Script.Description.FunctionInvokerBase.Invoke(Object[] parameters) in /_/src/WebJobs.Script/Description/FunctionInvokerBase.cs:line 82
2025-10-11T01:25:24.6510579Z          at Microsoft.Azure.WebJobs.Script.Description.FunctionGenerator.Coerce[T](Task`1 src) in /_/src/WebJobs.Script/Description/FunctionGenerator.cs:line 225
2025-10-11T01:25:24.6510642Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionInvoker`2.InvokeAsync(Object instance, Object[] arguments) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionInvoker.cs:line 53
2025-10-11T01:25:24.6510722Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.InvokeWithTimeoutAsync(IFunctionInvoker invoker, ParameterHelper parameterHelper, CancellationTokenSource timeoutTokenSource, CancellationTokenSource functionCancellationTokenSource, Boolean throwOnTimeout, TimeSpan timerInterval, IFunctionInstance instance) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionExecutor.cs:line 581
2025-10-11T01:25:24.6510793Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.ExecuteWithWatchersAsync(IFunctionInstanceEx instance, ParameterHelper parameterHelper, ILogger logger, CancellationTokenSource functionCancellationTokenSource) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionExecutor.cs:line 527
2025-10-11T01:25:24.6510887Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.ExecuteWithLoggingAsync(IFunctionInstanceEx instance, FunctionStartedMessage message, FunctionInstanceLogEntry instanceLogEntry, ParameterHelper parameterHelper, ILogger logger, CancellationToken cancellationToken) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionExecutor.cs:line 306
2025-10-11T01:25:24.6511068Z          --- End of inner exception stack trace ---
2025-10-11T01:25:24.6511149Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.ExecuteWithLoggingAsync(IFunctionInstanceEx instance, FunctionStartedMessage message, FunctionInstanceLogEntry instanceLogEntry, ParameterHelper parameterHelper, ILogger logger, CancellationToken cancellationToken) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionExecutor.cs:line 352
2025-10-11T01:25:24.6511215Z          at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.TryExecuteAsync(IFunctionInstance functionInstance, CancellationToken cancellationToken) in D:\a\_work\1\s\src\Microsoft.Azure.WebJobs.Host\Executors\FunctionExecutor.cs:line 108
2025-10-11T01:26:22.2352377Z ==============================================
2025-10-11T01:26:22.2354600Z Container Startup - Sat Oct 11 01:26:22 UTC 2025
2025-10-11T01:26:22.2354706Z ==============================================
2025-10-11T01:26:22.2354811Z 
2025-10-11T01:26:22.2354898Z 📋 Environment Variables:
2025-10-11T01:26:22.2354985Z   OPENFGA_API_URL: http://localhost:8080
2025-10-11T01:26:22.2355051Z   OPENFGA_STORE_ID: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:26:22.2355113Z   OPENFGA_DATASTORE_ENGINE: sqlserver
2025-10-11T01:26:22.2355185Z   OPENFGA_DATASTORE_URI: sqlserver://sqladmin:P@ssw0rd1760128283!@sqlsrv-me... (truncated)
2025-10-11T01:26:22.2355280Z   WEBSITES_PORT: 80
2025-10-11T01:26:22.2355344Z 
2025-10-11T01:26:22.2355406Z Running OpenFGA database migrations...
2025-10-11T01:26:25.2677694Z {"level":"info","timestamp":1760145985.2670994,"msg":"db info","build.version":"dev","build.commit":"none","current version":7}
2025-10-11T01:26:25.2678575Z {"level":"info","timestamp":1760145985.2672348,"msg":"running all migrations","build.version":"dev","build.commit":"none"}
2025-10-11T01:26:25.4709318Z {"level":"info","timestamp":1760145985.469555,"msg":"migration done","build.version":"dev","build.commit":"none"}
2025-10-11T01:26:25.4990407Z Starting OpenFGA on port 8080 with SQL Server backend...
2025-10-11T01:26:25.5493811Z Waiting for OpenFGA to be ready (this may take up to 3 minutes for SQL migrations)...
2025-10-11T01:26:26.0430523Z ⏳ Waiting for OpenFGA... (0s / 180s)
2025-10-11T01:26:31.7220840Z ✅ OpenFGA is ready! (took 5s)
2025-10-11T01:26:32.0732096Z Initializing OpenFGA with authorization model...
2025-10-11T01:26:32.9755397Z Using existing store: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:26:32.9756134Z Uploading authorization model...
2025-10-11T01:26:33.4979128Z Authorization model uploaded
2025-10-11T01:26:33.4979925Z Loading seed data...
2025-10-11T01:26:34.5134014Z Seed data response: {"code":"latest_authorization_model_not_found","message":"No authorization models found for store '01K785TE28A2Z3NWGAABN1TE8E'"}
2025-10-11T01:26:34.5134588Z Seed data loaded successfully
2025-10-11T01:26:34.5134679Z 
2025-10-11T01:26:34.5134747Z ==============================================
2025-10-11T01:26:34.5134814Z Starting Azure Functions Host
2025-10-11T01:26:34.5134879Z ==============================================
2025-10-11T01:26:34.5134943Z   OPENFGA_API_URL: http://localhost:8080
2025-10-11T01:26:34.5135093Z   OPENFGA_STORE_ID: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:26:34.5740184Z   Current directory: /home/site/wwwroot
2025-10-11T01:26:34.5929974Z   OpenFGA PID: 13
2025-10-11T01:26:34.5930351Z 
2025-10-11T01:26:34.5930442Z 📁 Function files:
2025-10-11T01:26:34.8408397Z -rwxr--r-- 1 root root  393144 Jan 11  2024 Azure.Core.dll
2025-10-11T01:26:34.8409062Z -rwxr--r-- 1 root root  306064 Sep 19  2022 Azure.Identity.dll
2025-10-11T01:26:34.8409141Z -rwxr--r-- 1 root root  472864 Jan  8  2024 Google.Protobuf.dll
2025-10-11T01:26:34.8409209Z -rwxr--r-- 1 root root   70432 Jan  2  2024 Grpc.Core.Api.dll
2025-10-11T01:26:34.8409275Z -rwxr--r-- 1 root root  295200 Jan  2  2024 Grpc.Net.Client.dll
2025-10-11T01:26:34.8409337Z 
2025-10-11T01:26:34.8424621Z 🚀 Executing Azure Functions host...
2025-10-11T01:26:47.2161853Z info: Host.Triggers.Warmup[0]
2025-10-11T01:26:47.2162730Z       Initializing Warmup Extension.
2025-10-11T01:26:47.5753224Z info: Host.Startup[503]
2025-10-11T01:26:47.5754114Z       Initializing Host. OperationId: '1a3af2d8-0076-40dd-a16e-9407e453575e'.
2025-10-11T01:26:47.6324777Z info: Host.Startup[504]
2025-10-11T01:26:47.6325689Z       Host initialization: ConsecutiveErrors=0, StartupCount=1, OperationId=1a3af2d8-0076-40dd-a16e-9407e453575e
2025-10-11T01:26:47.8342665Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8343538Z       ApplicationInsightsLoggerOptions
2025-10-11T01:26:47.8343615Z       {
2025-10-11T01:26:47.8343687Z         "SamplingSettings": {
2025-10-11T01:26:47.8343754Z           "EvaluationInterval": "00:00:15",
2025-10-11T01:26:47.8343821Z           "InitialSamplingPercentage": 100.0,
2025-10-11T01:26:47.8431933Z           "MaxSamplingPercentage": 100.0,
2025-10-11T01:26:47.8437877Z           "MaxTelemetryItemsPerSecond": 20.0,
2025-10-11T01:26:47.8437996Z           "MinSamplingPercentage": 0.1,
2025-10-11T01:26:47.8438061Z           "MovingAverageRatio": 0.25,
2025-10-11T01:26:47.8438128Z           "SamplingPercentageDecreaseTimeout": "00:02:00",
2025-10-11T01:26:47.8438195Z           "SamplingPercentageIncreaseTimeout": "00:15:00"
2025-10-11T01:26:47.8438258Z         },
2025-10-11T01:26:47.8438329Z         "SamplingExcludedTypes": null,
2025-10-11T01:26:47.8438418Z         "SamplingIncludedTypes": null,
2025-10-11T01:26:47.8438483Z         "SnapshotConfiguration": null,
2025-10-11T01:26:47.8438549Z         "EnablePerformanceCountersCollection": true,
2025-10-11T01:26:47.8438643Z         "HttpAutoCollectionOptions": {
2025-10-11T01:26:47.8438709Z           "EnableHttpTriggerExtendedInfoCollection": true,
2025-10-11T01:26:47.8438773Z           "EnableW3CDistributedTracing": true,
2025-10-11T01:26:47.8438857Z           "EnableResponseHeaderInjection": true
2025-10-11T01:26:47.8438921Z         },
2025-10-11T01:26:47.8438985Z         "LiveMetricsInitializationDelay": "00:00:15",
2025-10-11T01:26:47.8439052Z         "EnableLiveMetrics": true,
2025-10-11T01:26:47.8439116Z         "EnableLiveMetricsFilters": false,
2025-10-11T01:26:47.8439179Z         "EnableQueryStringTracing": false,
2025-10-11T01:26:47.8439243Z         "EnableDependencyTracking": true,
2025-10-11T01:26:47.8817105Z         "DependencyTrackingOptions": null,
2025-10-11T01:26:47.8817533Z         "TokenCredentialOptions": null,
2025-10-11T01:26:47.8817612Z         "DiagnosticsEventListenerLogLevel": null,
2025-10-11T01:26:47.8817680Z         "EnableAutocollectedMetricsExtractor": false,
2025-10-11T01:26:47.8817748Z         "EnableMetricsCustomDimensionOptimization": false,
2025-10-11T01:26:47.8817815Z         "EnableAdaptiveSamplingDelay": true,
2025-10-11T01:26:47.8817996Z         "AdaptiveSamplingInitializationDelay": "00:00:15"
2025-10-11T01:26:47.8818060Z       }
2025-10-11T01:26:47.8819034Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8819120Z       LoggerFilterOptions
2025-10-11T01:26:47.8819183Z       {
2025-10-11T01:26:47.8819307Z         "MinLevel": "None",
2025-10-11T01:26:47.8819371Z         "Rules": [
2025-10-11T01:26:47.8819433Z           {
2025-10-11T01:26:47.8819497Z             "ProviderName": null,
2025-10-11T01:26:47.8819560Z             "CategoryName": null,
2025-10-11T01:26:47.8819622Z             "LogLevel": "Warning",
2025-10-11T01:26:47.8819684Z             "Filter": null
2025-10-11T01:26:47.8819765Z           },
2025-10-11T01:26:47.8819829Z           {
2025-10-11T01:26:47.8819890Z             "ProviderName": null,
2025-10-11T01:26:47.8819951Z             "CategoryName": null,
2025-10-11T01:26:47.8820024Z             "LogLevel": null,
2025-10-11T01:26:47.8820088Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8820150Z           },
2025-10-11T01:26:47.8820228Z           {
2025-10-11T01:26:47.8820299Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.WebHostSystemLoggerProvider",
2025-10-11T01:26:47.8820364Z             "CategoryName": null,
2025-10-11T01:26:47.8820426Z             "LogLevel": "None",
2025-10-11T01:26:47.8820489Z             "Filter": null
2025-10-11T01:26:47.8820549Z           },
2025-10-11T01:26:47.8820608Z           {
2025-10-11T01:26:47.8820695Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.WebHostSystemLoggerProvider",
2025-10-11T01:26:47.8820759Z             "CategoryName": null,
2025-10-11T01:26:47.8820820Z             "LogLevel": null,
2025-10-11T01:26:47.8820882Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8820943Z           },
2025-10-11T01:26:47.8821004Z           {
2025-10-11T01:26:47.8821092Z             "ProviderName": null,
2025-10-11T01:26:47.8821155Z             "CategoryName": null,
2025-10-11T01:26:47.8821217Z             "LogLevel": null,
2025-10-11T01:26:47.8821279Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8821338Z           },
2025-10-11T01:26:47.8821422Z           {
2025-10-11T01:26:47.8821485Z             "ProviderName": null,
2025-10-11T01:26:47.8821550Z             "CategoryName": "Host.Function.ToolingConsoleLog",
2025-10-11T01:26:47.8821615Z             "LogLevel": "Information",
2025-10-11T01:26:47.8821677Z             "Filter": null
2025-10-11T01:26:47.8821739Z           },
2025-10-11T01:26:47.8821798Z           {
2025-10-11T01:26:47.8821884Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
2025-10-11T01:26:47.8821950Z             "CategoryName": null,
2025-10-11T01:26:47.8822012Z             "LogLevel": "None",
2025-10-11T01:26:47.8822074Z             "Filter": null
2025-10-11T01:26:47.8822139Z           },
2025-10-11T01:26:47.8822199Z           {
2025-10-11T01:26:47.8822284Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
2025-10-11T01:26:47.8822348Z             "CategoryName": null,
2025-10-11T01:26:47.8822411Z             "LogLevel": null,
2025-10-11T01:26:47.8822473Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8822534Z           },
2025-10-11T01:26:47.8822594Z           {
2025-10-11T01:26:47.8822664Z             "ProviderName": "Microsoft.Azure.WebJobs.Logging.ApplicationInsights.ApplicationInsightsLoggerProvider",
2025-10-11T01:26:47.8822748Z             "CategoryName": null,
2025-10-11T01:26:47.8822812Z             "LogLevel": "Trace",
2025-10-11T01:26:47.8822874Z             "Filter": null
2025-10-11T01:26:47.8822934Z           }
2025-10-11T01:26:47.8822994Z         ]
2025-10-11T01:26:47.8823054Z       }
2025-10-11T01:26:47.8823118Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8823200Z       LoggerFilterOptions
2025-10-11T01:26:47.8823262Z       {
2025-10-11T01:26:47.8823323Z         "MinLevel": "None",
2025-10-11T01:26:47.8823383Z         "Rules": [
2025-10-11T01:26:47.8823443Z           {
2025-10-11T01:26:47.8823503Z             "ProviderName": null,
2025-10-11T01:26:47.8823565Z             "CategoryName": null,
2025-10-11T01:26:47.8823645Z             "LogLevel": "Warning",
2025-10-11T01:26:47.8823708Z             "Filter": null
2025-10-11T01:26:47.8823768Z           },
2025-10-11T01:26:47.8823828Z           {
2025-10-11T01:26:47.8823888Z             "ProviderName": null,
2025-10-11T01:26:47.8823949Z             "CategoryName": null,
2025-10-11T01:26:47.8824010Z             "LogLevel": null,
2025-10-11T01:26:47.8824091Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8824155Z           },
2025-10-11T01:26:47.8851256Z           {
2025-10-11T01:26:47.8851336Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.WebHostSystemLoggerProvider",
2025-10-11T01:26:47.8851406Z             "CategoryName": null,
2025-10-11T01:26:47.8851470Z             "LogLevel": "None",
2025-10-11T01:26:47.8851532Z             "Filter": null
2025-10-11T01:26:47.8851617Z           },
2025-10-11T01:26:47.8851680Z           {
2025-10-11T01:26:47.8851746Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.WebHostSystemLoggerProvider",
2025-10-11T01:26:47.8851809Z             "CategoryName": null,
2025-10-11T01:26:47.8851870Z             "LogLevel": null,
2025-10-11T01:26:47.8851933Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8851993Z           },
2025-10-11T01:26:47.8852076Z           {
2025-10-11T01:26:47.8852138Z             "ProviderName": null,
2025-10-11T01:26:47.8852200Z             "CategoryName": null,
2025-10-11T01:26:47.8852262Z             "LogLevel": null,
2025-10-11T01:26:47.8852333Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8852418Z           },
2025-10-11T01:26:47.8852480Z           {
2025-10-11T01:26:47.8852542Z             "ProviderName": null,
2025-10-11T01:26:47.8852607Z             "CategoryName": "Host.Function.ToolingConsoleLog",
2025-10-11T01:26:47.8852672Z             "LogLevel": "Information",
2025-10-11T01:26:47.8852733Z             "Filter": null
2025-10-11T01:26:47.8852793Z           },
2025-10-11T01:26:47.8852873Z           {
2025-10-11T01:26:47.8852941Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
2025-10-11T01:26:47.8853004Z             "CategoryName": null,
2025-10-11T01:26:47.8853065Z             "LogLevel": "None",
2025-10-11T01:26:47.8853126Z             "Filter": null
2025-10-11T01:26:47.8853185Z           },
2025-10-11T01:26:47.8853243Z           {
2025-10-11T01:26:47.8853330Z             "ProviderName": "Microsoft.Azure.WebJobs.Script.WebHost.Diagnostics.SystemLoggerProvider",
2025-10-11T01:26:47.8853398Z             "CategoryName": null,
2025-10-11T01:26:47.8853460Z             "LogLevel": null,
2025-10-11T01:26:47.8853521Z             "Filter": "<AddFilter>b__0"
2025-10-11T01:26:47.8853581Z           },
2025-10-11T01:26:47.8853660Z           {
2025-10-11T01:26:47.8853730Z             "ProviderName": "Microsoft.Azure.WebJobs.Logging.ApplicationInsights.ApplicationInsightsLoggerProvider",
2025-10-11T01:26:47.8853793Z             "CategoryName": null,
2025-10-11T01:26:47.8853856Z             "LogLevel": "Trace",
2025-10-11T01:26:47.8853917Z             "Filter": null
2025-10-11T01:26:47.8853977Z           }
2025-10-11T01:26:47.8854036Z         ]
2025-10-11T01:26:47.8854118Z       }
2025-10-11T01:26:47.8854183Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8854246Z       HttpWorkerOptions
2025-10-11T01:26:47.8854306Z       {
2025-10-11T01:26:47.8854367Z         "Type": 0,
2025-10-11T01:26:47.8854648Z         "Description": null,
2025-10-11T01:26:47.8854719Z         "Arguments": null,
2025-10-11T01:26:47.8854801Z         "Port": 0,
2025-10-11T01:26:47.8854866Z         "EnableForwardingHttpRequest": false,
2025-10-11T01:26:47.8854932Z         "EnableProxyingHttpRequest": false,
2025-10-11T01:26:47.8854994Z         "InitializationTimeout": "00:00:30"
2025-10-11T01:26:47.8855054Z       }
2025-10-11T01:26:47.8855118Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8855182Z       FunctionResultAggregatorOptions
2025-10-11T01:26:47.8855266Z       {
2025-10-11T01:26:47.8855327Z         "BatchSize": 1000,
2025-10-11T01:26:47.8855390Z         "FlushTimeout": "00:00:30",
2025-10-11T01:26:47.8855452Z         "IsEnabled": true
2025-10-11T01:26:47.8855511Z       }
2025-10-11T01:26:47.8855575Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8855637Z       ConcurrencyOptions
2025-10-11T01:26:47.8855717Z       {
2025-10-11T01:26:47.8855781Z         "DynamicConcurrencyEnabled": false,
2025-10-11T01:26:47.8855843Z         "MaximumFunctionConcurrency": 500,
2025-10-11T01:26:47.8855906Z         "CPUThreshold": 0.8,
2025-10-11T01:26:47.8855967Z         "SnapshotPersistenceEnabled": true
2025-10-11T01:26:47.8856027Z       }
2025-10-11T01:26:47.8856090Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8856175Z       SingletonOptions
2025-10-11T01:26:47.8856236Z       {
2025-10-11T01:26:47.8856296Z         "LockPeriod": "00:00:15",
2025-10-11T01:26:47.8856359Z         "ListenerLockPeriod": "00:01:00",
2025-10-11T01:26:47.8856424Z         "LockAcquisitionTimeout": "10675199.02:48:05.4775807",
2025-10-11T01:26:47.8856489Z         "LockAcquisitionPollingInterval": "00:00:05",
2025-10-11T01:26:47.8856554Z         "ListenerLockRecoveryPollingInterval": "00:01:00"
2025-10-11T01:26:47.8856636Z       }
2025-10-11T01:26:47.8856702Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:47.8856763Z       ScaleOptions
2025-10-11T01:26:47.8856822Z       {
2025-10-11T01:26:47.8856884Z         "ScaleMetricsMaxAge": "00:02:00",
2025-10-11T01:26:47.8856948Z         "ScaleMetricsSampleInterval": "00:00:10",
2025-10-11T01:26:47.9410786Z         "MetricsPurgeEnabled": true,
2025-10-11T01:26:47.9410951Z         "IsTargetScalingEnabled": true,
2025-10-11T01:26:47.9411020Z         "IsRuntimeScalingEnabled": false
2025-10-11T01:26:47.9411085Z       }
2025-10-11T01:26:47.9411155Z info: Microsoft.Azure.WebJobs.Hosting.JobHostService[0]
2025-10-11T01:26:47.9411220Z       Starting JobHost
2025-10-11T01:26:47.9411779Z info: Host.Startup[401]
2025-10-11T01:26:47.9411893Z       Starting Host (HostId=func-menu-app-18436, InstanceId=8bfc6f75-a6bc-4d54-8bbb-4cbbb174799f, Version=4.1042.100.9, ProcessId=1, AppDomainId=1, InDebugMode=False, InDiagnosticMode=False, FunctionsExtensionVersion=~4)
2025-10-11T01:26:48.0517160Z info: Host.Startup[314]
2025-10-11T01:26:48.0517635Z       Loading functions metadata
2025-10-11T01:26:57.9211333Z info: Host.Startup[326]
2025-10-11T01:26:57.9212422Z       Reading functions metadata (Custom)
2025-10-11T01:26:57.9996752Z info: Host.Startup[327]
2025-10-11T01:26:57.9997569Z       0 functions found (Custom)
2025-10-11T01:26:58.0981439Z info: Host.Startup[315]
2025-10-11T01:26:58.0982271Z       2 functions loaded
2025-10-11T01:26:58.4045633Z info: Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcFunctionInvocationDispatcher[0]
2025-10-11T01:26:58.4046286Z       Worker process started and initialized.
2025-10-11T01:26:58.4167032Z info: Host.Startup[0]
2025-10-11T01:26:58.4167845Z       Generating 2 job function(s)
2025-10-11T01:26:58.9688786Z info: Host.Startup[0]
2025-10-11T01:26:58.9849394Z       Found the following functions:
2025-10-11T01:26:58.9849550Z       Host.Functions.GetMenu
2025-10-11T01:26:58.9849623Z       Host.Functions.GetMenuItem
2025-10-11T01:26:58.9849791Z       
2025-10-11T01:26:59.0385005Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:26:59.0385851Z       HttpOptions
2025-10-11T01:26:59.0385938Z       {
2025-10-11T01:26:59.0386005Z         "DynamicThrottlesEnabled": false,
2025-10-11T01:26:59.0386069Z         "EnableChunkedRequestBinding": false,
2025-10-11T01:26:59.0386230Z         "MaxConcurrentRequests": -1,
2025-10-11T01:26:59.0386297Z         "MaxOutstandingRequests": -1,
2025-10-11T01:26:59.0477920Z         "RoutePrefix": "api"
2025-10-11T01:26:59.0478261Z       }
2025-10-11T01:26:59.0478341Z info: Microsoft.Azure.WebJobs.Script.WebHost.WebScriptHostHttpRoutesManager[0]
2025-10-11T01:26:59.0478412Z       Initializing function HTTP routes
2025-10-11T01:26:59.0478478Z       Mapped function route 'api/menu' [get] to 'GetMenu'
2025-10-11T01:26:59.0478584Z       Mapped function route 'api/menu/{id}' [get] to 'GetMenuItem'
2025-10-11T01:26:59.0478649Z       
2025-10-11T01:26:59.1371783Z info: Host.Startup[412]
2025-10-11T01:26:59.1372733Z       Host initialized (11151ms)
2025-10-11T01:26:59.2156296Z info: Host.Startup[413]
2025-10-11T01:26:59.2156855Z       Host started (11313ms)
2025-10-11T01:26:59.2337456Z info: Host.Startup[0]
2025-10-11T01:26:59.2337826Z       Job host started
2025-10-11T01:26:59.5733200Z Hosting environment: Production
2025-10-11T01:26:59.6107607Z Content root path: /azure-functions-host
2025-10-11T01:26:59.6108069Z Now listening on: http://[::]:80
2025-10-11T01:26:59.6108147Z Application started. Press Ctrl+C to shut down.
2025-10-11T01:26:59.8834717Z info: Host.General[337]
2025-10-11T01:26:59.8835459Z       Host lock lease acquired by instance ID 'a58ac17e90a47aad03818806040aeb04'.
2025-10-11T01:27:18.5750734Z info: Function.GetMenu[1]
2025-10-11T01:27:18.5751452Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=a33ee31a-4b3d-42c9-a465-10828ceb1fc4)
2025-10-11T01:27:19.7165297Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7166017Z       ============================================
2025-10-11T01:27:19.7632502Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7633102Z       OpenFGA Client Configuration
2025-10-11T01:27:19.7660803Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7661081Z       ============================================
2025-10-11T01:27:19.7661147Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7661199Z       API URL: http://localhost:8080
2025-10-11T01:27:19.7661302Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7661359Z       Store ID: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:27:19.7661408Z info: Host.Function.Console[0]
2025-10-11T01:27:19.7661458Z       ============================================
2025-10-11T01:27:23.3101048Z info: Function.GetMenu.User[0]
2025-10-11T01:27:23.3671375Z       === GetMenu function started ===
2025-10-11T01:27:23.3672191Z info: Function.GetMenu.User[0]
2025-10-11T01:27:23.3672259Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:27:24.5062154Z info: Function.GetMenu.User[0]
2025-10-11T01:27:24.5062610Z       Processing request for user: alice
2025-10-11T01:27:29.7595725Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:27:29.7596606Z       HttpOptions
2025-10-11T01:27:29.7596666Z       {
2025-10-11T01:27:29.7596720Z         "DynamicThrottlesEnabled": false,
2025-10-11T01:27:29.7596771Z         "EnableChunkedRequestBinding": false,
2025-10-11T01:27:29.7596830Z         "MaxConcurrentRequests": -1,
2025-10-11T01:27:29.7596880Z         "MaxOutstandingRequests": -1,
2025-10-11T01:27:29.7601358Z         "RoutePrefix": "api"
2025-10-11T01:27:29.7601508Z       }
2025-10-11T01:27:29.7797962Z info: Microsoft.Azure.WebJobs.Hosting.OptionsLoggingService[0]
2025-10-11T01:27:29.7798371Z       ConcurrencyOptions
2025-10-11T01:27:29.7798431Z       {
2025-10-11T01:27:29.7798487Z         "DynamicConcurrencyEnabled": false,
2025-10-11T01:27:29.7798537Z         "MaximumFunctionConcurrency": 500,
2025-10-11T01:27:29.7798588Z         "CPUThreshold": 0.8,
2025-10-11T01:27:29.7798638Z         "SnapshotPersistenceEnabled": true
2025-10-11T01:27:29.7798686Z       }
2025-10-11T01:27:56.1046215Z info: Function.GetMenu[1]
2025-10-11T01:27:56.1046858Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=636567ee-4945-45c9-a8a6-aea3fbb47c6f)
2025-10-11T01:27:56.7282753Z info: Function.GetMenu.User[0]
2025-10-11T01:27:56.7283183Z       === GetMenu function started ===
2025-10-11T01:27:56.7620266Z info: Function.GetMenu.User[0]
2025-10-11T01:27:56.7620916Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:27:56.7620978Z info: Function.GetMenu.User[0]
2025-10-11T01:27:56.7621032Z       Processing request for user: alice
2025-10-11T01:28:01.8516996Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:01.8517440Z       An error occurred using the connection to database 'db-menu-app' on server 'sqlsrv-menu-app-24259.database.windows.net'.
2025-10-11T01:28:02.7375980Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:02.7376564Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:02.7441977Z       Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:02.7442345Z        ---> System.IO.IOException: Unable to write data to the transport connection: Connection reset by peer.
2025-10-11T01:28:02.7442413Z        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
2025-10-11T01:28:02.7442470Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7442524Z          --- End of inner exception stack trace ---
2025-10-11T01:28:02.7442579Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7442634Z          at System.IO.Stream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7442687Z          at System.Net.Sockets.NetworkStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7442742Z          at Microsoft.Data.SqlClient.SNI.SslOverTdsStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7442864Z          at System.Net.Security.SyncReadWriteAdapter.WriteAsync(Stream stream, ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7442924Z          at System.Net.Security.SslStream.WriteSingleChunk[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7442982Z          at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7443035Z          at System.Net.Security.SslStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7443089Z          at Microsoft.Data.SqlClient.SNI.SNIPacket.WriteToStream(Stream stream)
2025-10-11T01:28:02.7443141Z          at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Send(SNIPacket packet)
2025-10-11T01:28:02.7443199Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:02.7443260Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7443317Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7443414Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7443471Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:02.7443527Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:02.7443594Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7443660Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7443725Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:02.7443830Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:02.7443933Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:02.7444016Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:02.7444326Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7444399Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7444460Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7444521Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7444588Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:02.7444641Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:02.7444726Z       --- End of stack trace from previous location ---
2025-10-11T01:28:02.7444785Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7444843Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7444901Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:02.7444961Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:02.7445024Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:02.7445088Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:02.7445143Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:02.7445195Z       ClientConnectionId:cb52d054-1263-44d5-98f1-c52758ed0cae
2025-10-11T01:28:02.7445288Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:02.7445358Z       Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:02.7445413Z        ---> System.IO.IOException: Unable to write data to the transport connection: Connection reset by peer.
2025-10-11T01:28:02.7445466Z        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
2025-10-11T01:28:02.7445520Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7445572Z          --- End of inner exception stack trace ---
2025-10-11T01:28:02.7445624Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7445676Z          at System.IO.Stream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7445729Z          at System.Net.Sockets.NetworkStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7445816Z          at Microsoft.Data.SqlClient.SNI.SslOverTdsStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7445876Z          at System.Net.Security.SyncReadWriteAdapter.WriteAsync(Stream stream, ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7445934Z          at System.Net.Security.SslStream.WriteSingleChunk[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7445991Z          at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7446045Z          at System.Net.Security.SslStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7446099Z          at Microsoft.Data.SqlClient.SNI.SNIPacket.WriteToStream(Stream stream)
2025-10-11T01:28:02.7446151Z          at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Send(SNIPacket packet)
2025-10-11T01:28:02.7446210Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:02.7446360Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7446453Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7446518Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7446572Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:02.7446627Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:02.7446693Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7446756Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7446821Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:02.7446888Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:02.7446988Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:02.7451320Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:02.7451459Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7451526Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7451586Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7451648Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7451857Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:02.7451966Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:02.7452021Z       --- End of stack trace from previous location ---
2025-10-11T01:28:02.7452080Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7452137Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7452194Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:02.7452253Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:02.7452315Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:02.7452378Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:02.7452435Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:02.7452521Z       ClientConnectionId:cb52d054-1263-44d5-98f1-c52758ed0cae
2025-10-11T01:28:02.7452588Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:02.7452644Z        ---> System.IO.IOException: Unable to write data to the transport connection: Connection reset by peer.
2025-10-11T01:28:02.7452698Z        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
2025-10-11T01:28:02.7452753Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7452804Z          --- End of inner exception stack trace ---
2025-10-11T01:28:02.7452858Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7452910Z          at System.IO.Stream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7452964Z          at System.Net.Sockets.NetworkStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7453018Z          at Microsoft.Data.SqlClient.SNI.SslOverTdsStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:02.7453112Z          at System.Net.Security.SyncReadWriteAdapter.WriteAsync(Stream stream, ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7453171Z          at System.Net.Security.SslStream.WriteSingleChunk[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7453228Z          at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:02.7453281Z          at System.Net.Security.SslStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:02.7453482Z          at Microsoft.Data.SqlClient.SNI.SNIPacket.WriteToStream(Stream stream)
2025-10-11T01:28:02.7453540Z          at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Send(SNIPacket packet)
2025-10-11T01:28:02.7453599Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:02.7453659Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7453749Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7453815Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7453868Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:02.7453924Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:02.7453990Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7454054Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7454119Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:02.7454188Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:02.7454290Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:02.7454372Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:02.7454438Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7454503Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7454564Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7454625Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7454692Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:02.7454745Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:02.7454832Z       --- End of stack trace from previous location ---
2025-10-11T01:28:02.7454897Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7454956Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7455091Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:02.7455156Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:02.7455219Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:02.7455282Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:02.7455337Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:02.7455431Z       ClientConnectionId:cb52d054-1263-44d5-98f1-c52758ed0cae
2025-10-11T01:28:02.7455531Z       Stack:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:02.7455590Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7455648Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7455708Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:02.7455762Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:02.7455816Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:02.7455917Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7455980Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:02.7456044Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:02.7456111Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:02.7456177Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:02.7456258Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:02.7456323Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7456420Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:02.7456481Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7456617Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:02.7456687Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:02.7456739Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:02.7456790Z       --- End of stack trace from previous location ---
2025-10-11T01:28:02.7456847Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7456905Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:02.7456998Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:02.7457060Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:02.7457122Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:02.7457185Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:02.7457240Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:03.2521540Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:03.2521956Z       ❌ FATAL ERROR in GetMenu: A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:03.2522042Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:03.2522226Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the login process. (provider: TCP Provider, error: 35 - An internal exception was caught)
2025-10-11T01:28:03.2522288Z        ---> System.IO.IOException: Unable to write data to the transport connection: Connection reset by peer.
2025-10-11T01:28:03.2522342Z        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
2025-10-11T01:28:03.2522397Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:03.2522449Z          --- End of inner exception stack trace ---
2025-10-11T01:28:03.2522502Z          at System.Net.Sockets.NetworkStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:03.2522554Z          at System.IO.Stream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:03.2522607Z          at System.Net.Sockets.NetworkStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:03.2522660Z          at Microsoft.Data.SqlClient.SNI.SslOverTdsStream.Write(ReadOnlySpan`1 buffer)
2025-10-11T01:28:03.2522718Z          at System.Net.Security.SyncReadWriteAdapter.WriteAsync(Stream stream, ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:03.2522814Z          at System.Net.Security.SslStream.WriteSingleChunk[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:03.2522874Z          at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
2025-10-11T01:28:03.2522932Z          at System.Net.Security.SslStream.Write(Byte[] buffer, Int32 offset, Int32 count)
2025-10-11T01:28:03.2522984Z          at Microsoft.Data.SqlClient.SNI.SNIPacket.WriteToStream(Stream stream)
2025-10-11T01:28:03.2523037Z          at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Send(SNIPacket packet)
2025-10-11T01:28:03.2523096Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:03.2523155Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2523212Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2523273Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2523361Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:03.2523418Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:03.2523484Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2523546Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2523610Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:03.2523677Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:03.2524194Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:03.2524318Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:03.2524387Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2524452Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2524512Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2524573Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2524641Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:03.2524694Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:03.2524746Z       --- End of stack trace from previous location ---
2025-10-11T01:28:03.2524840Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2524900Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2524961Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:03.2525021Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:03.2525083Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:03.2525148Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:03.2525204Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:03.2525263Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2525323Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2525412Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:03.2525466Z       ClientConnectionId:cb52d054-1263-44d5-98f1-c52758ed0cae
2025-10-11T01:28:03.2525526Z       Stack:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:03.2525584Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2525641Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2525701Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2525755Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:03.2525810Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:03.2525998Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2526065Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2526130Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:03.2526198Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:03.2526264Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:03.2526343Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:03.2526408Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2526495Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2526559Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2526620Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2526686Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:03.2526739Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:03.2526791Z       --- End of stack trace from previous location ---
2025-10-11T01:28:03.2526849Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2526906Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2526964Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:03.2527047Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:03.2527111Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:03.2527174Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:03.2527229Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:03.2527364Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2527427Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2527481Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:03.2730685Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:03.2731143Z       Stack trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T01:28:03.2731213Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2731272Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2731333Z          at Microsoft.Data.SqlClient.TdsParserStateObject.SNIWritePacket(PacketHandle packet, UInt32& sniError, Boolean canAccumulate, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T01:28:03.2731388Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WriteSni(Boolean canAccumulate)
2025-10-11T01:28:03.2731443Z          at Microsoft.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode, Boolean canAccumulate)
2025-10-11T01:28:03.2731510Z          at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, FederatedAuthenticationFeatureExtensionData fedAuthFeatureExtensionData, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2731573Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword, SqlConnectionEncryptOption encrypt)
2025-10-11T01:28:03.2731670Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T01:28:03.2731741Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T01:28:03.2731808Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T01:28:03.2731889Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T01:28:03.2731955Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2732019Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T01:28:03.2732078Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2732162Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T01:28:03.2732232Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T01:28:03.2732286Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T01:28:03.2732337Z       --- End of stack trace from previous location ---
2025-10-11T01:28:03.2732396Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2732455Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T01:28:03.2732940Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T01:28:03.2733006Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:03.2733069Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:03.2910803Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:03.2910910Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:03.2910972Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2911030Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:03.2911111Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:04.6350501Z info: Function.GetMenu[2]
2025-10-11T01:28:04.6350862Z       Executed 'Functions.GetMenu' (Succeeded, Id=a33ee31a-4b3d-42c9-a465-10828ceb1fc4, Duration=46020ms)
2025-10-11T01:28:05.9501404Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:05.9502263Z       Failed executing DbCommand (1,355ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:28:05.9502327Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:28:05.9502379Z       FROM [MenuItems] AS [m]
2025-10-11T01:28:06.2484863Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:06.2485291Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:06.2485446Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2485511Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2485566Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2485623Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2485675Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2485731Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2485788Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2485837Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2485897Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2485979Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2486043Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.2486107Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.2486163Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.2486215Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:06.2486265Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:06.2486319Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:06.2486372Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:06.2486436Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:06.2486488Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2486564Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2486815Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2486883Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2486937Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2486992Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2487047Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2487098Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2487157Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2487216Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2487301Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.2487365Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.2487421Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.2487472Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:06.2487521Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:06.2487573Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:06.2488088Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:06.2488150Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2488204Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2488280Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2488342Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2488393Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2488448Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2488502Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2488553Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2488611Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2488670Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2488730Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.2488816Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.2488873Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.2488925Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:06.2488974Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:06.2489026Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:06.2489079Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:06.2489135Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2489188Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2489244Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2489295Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2489372Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2489428Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2489478Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2489537Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2489595Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2489655Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.2489719Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.2489774Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.2764351Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:06.2764773Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2764842Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2764900Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:06.2764954Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2765008Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2765068Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2765120Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2765176Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2765232Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2765309Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2765373Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765433Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765494Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765559Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765614Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.2765674Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765732Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.2765788Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:06.2765858Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:06.2765910Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:06.2765964Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:06.2766020Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:06.2766074Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.2766127Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.2766185Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2766236Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2766292Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.2766347Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.2766420Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.2766481Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.3496595Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.3497037Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.3497113Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.3497173Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.3497233Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.3497295Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.3497436Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:06.3497495Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:06.3497551Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:06.3497604Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:06.4004973Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.4005369Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.4005436Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:06.4005496Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:06.4005548Z       --- End of stack trace from previous location ---
2025-10-11T01:28:06.4005686Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.4005750Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:06.4005812Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:06.4005877Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:06.4005933Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:06.4005992Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.4006050Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:06.4006104Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:06.4362396Z info: Function.GetMenu[2]
2025-10-11T01:28:06.4362937Z       Executed 'Functions.GetMenu' (Succeeded, Id=636567ee-4945-45c9-a8a6-aea3fbb47c6f, Duration=10343ms)
2025-10-11T01:28:22.1541774Z info: Function.GetMenu[1]
2025-10-11T01:28:22.1542229Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=ae10d113-68b6-4aad-beac-9bc7c99cf721)
2025-10-11T01:28:22.3325129Z info: Function.GetMenu.User[0]
2025-10-11T01:28:22.3325541Z       === GetMenu function started ===
2025-10-11T01:28:22.4152342Z info: Function.GetMenu.User[0]
2025-10-11T01:28:22.4152761Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:28:22.4152823Z info: Function.GetMenu.User[0]
2025-10-11T01:28:22.4152875Z       Processing request for user: alice
2025-10-11T01:28:24.0448909Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:24.0449634Z       Failed executing DbCommand (91ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:28:24.0449700Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:28:24.0449759Z       FROM [MenuItems] AS [m]
2025-10-11T01:28:24.0769317Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:24.0769716Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:24.0769780Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:24.0769838Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.0769892Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.0770059Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0770115Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0770172Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0770227Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.0770278Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0770341Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0770400Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0770460Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.0770526Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.0770620Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.0770674Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:24.0770724Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:24.0770777Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:24.0770833Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:24.0770894Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:24.0770947Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:24.0771002Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.0771055Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.0771112Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0771196Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0771253Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0771309Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.0771359Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0771420Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0771479Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0771540Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.0771602Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.0771656Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.0771741Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:24.0771793Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:24.0771845Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:24.0772179Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:24.0772241Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:24.0772295Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.0772348Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.0772404Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0772456Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0772542Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.0772599Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.0772650Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.0772710Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0772770Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.0772830Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.0772893Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.0772947Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.0773004Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:24.0773085Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:24.0773138Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:24.0773192Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:24.0773247Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.0773301Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.1236241Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.1236380Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.1236444Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.1236499Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.1236553Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.1236683Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.1236747Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.1236809Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.1236876Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.1236932Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.3317683Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:24.3318065Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:24.3318137Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:24.3318197Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:24.3318345Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.3318401Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.3318457Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3318509Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3318566Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3318621Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.3318671Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3318731Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3318791Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3318876Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.3318942Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.3318997Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.3319057Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3319113Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3319168Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:24.3319219Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:24.3319268Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:24.3319320Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:24.3319404Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:24.3319462Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.3319517Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.3319573Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3319623Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3319679Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3319733Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.3319782Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3319841Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3319899Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3319988Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.3320051Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.3320411Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.3320477Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3320536Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3320589Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:24.3320638Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:24.3320693Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:24.3320772Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:24.3320832Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3320882Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3320938Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:24.3320994Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:24.3321045Z       --- End of stack trace from previous location ---
2025-10-11T01:28:24.3321105Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321163Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321224Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321306Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321363Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:24.3321421Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321480Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:24.3321532Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:24.3321582Z info: Function.GetMenu[2]
2025-10-11T01:28:24.3321637Z       Executed 'Functions.GetMenu' (Succeeded, Id=ae10d113-68b6-4aad-beac-9bc7c99cf721, Duration=2159ms)
2025-10-11T01:28:40.1833340Z info: Function.GetMenu[1]
2025-10-11T01:28:40.1855371Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=bbc9fccd-d3ab-4d54-8a39-6de39d01ef8b)
2025-10-11T01:28:40.2453418Z info: Function.GetMenu.User[0]
2025-10-11T01:28:40.2454040Z       === GetMenu function started ===
2025-10-11T01:28:40.2936964Z info: Function.GetMenu.User[0]
2025-10-11T01:28:40.2937504Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:28:40.2952332Z info: Function.GetMenu.User[0]
2025-10-11T01:28:40.2952549Z       Processing request for user: alice
2025-10-11T01:28:40.3780679Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:40.3781360Z       Failed executing DbCommand (69ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:28:40.3781423Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:28:40.3781474Z       FROM [MenuItems] AS [m]
2025-10-11T01:28:40.4195981Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:40.4196414Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:40.4196477Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4196534Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4196590Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4196647Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4196699Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4196754Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4196809Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4196860Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4196947Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4197008Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4197070Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4197133Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4197188Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4197239Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:40.4197289Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:40.4197341Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:40.4197395Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:40.4197481Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:40.4197537Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4197591Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4197642Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4197699Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4197749Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4197805Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4197860Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4197909Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4197988Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4198051Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4198112Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4198174Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4198230Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4198281Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:40.4198330Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:40.4198381Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:40.4198883Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:40.4198965Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4199022Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4199075Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4199131Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4199181Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4199237Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4199291Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4199345Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4199405Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4199464Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4199546Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4199612Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4199667Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4199718Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:40.4199768Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:40.4199821Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:40.4199874Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:40.4199929Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4199981Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4200057Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4200110Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4200166Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4200220Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4200271Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4200330Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4200389Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4200449Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4200511Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4200586Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4573545Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:40.4573931Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4574003Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4574061Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:40.4574116Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4574171Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4574229Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4574282Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4574339Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4574464Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4574518Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4574578Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4574638Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4574699Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4574763Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4574819Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4574878Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.4574961Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.4575020Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:40.4575072Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:40.4575123Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:40.4575175Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:40.4575229Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:40.4575285Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.4575338Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.4575396Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4575447Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4575523Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.4575581Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.4575631Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.4575691Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4575752Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.4575813Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.4575878Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.4576204Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.4576269Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.4576347Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.4576403Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:40.5004230Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:40.5004621Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:40.5004687Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:40.5004749Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.5004803Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.5004860Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:40.5004915Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:40.5005027Z       --- End of stack trace from previous location ---
2025-10-11T01:28:40.5005093Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005154Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005216Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005279Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005336Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:40.5005394Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005451Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:40.5005526Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:40.5380816Z info: Function.GetMenu[2]
2025-10-11T01:28:40.5384210Z       Executed 'Functions.GetMenu' (Succeeded, Id=bbc9fccd-d3ab-4d54-8a39-6de39d01ef8b, Duration=385ms)
2025-10-11T01:28:56.5639868Z info: Function.GetMenu[1]
2025-10-11T01:28:56.5640310Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=623af8f0-0888-4543-a14b-7a97080c2594)
2025-10-11T01:28:56.6314774Z info: Function.GetMenu.User[0]
2025-10-11T01:28:56.6315335Z       === GetMenu function started ===
2025-10-11T01:28:56.6819554Z info: Function.GetMenu.User[0]
2025-10-11T01:28:56.6820110Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:28:56.6820663Z info: Function.GetMenu.User[0]
2025-10-11T01:28:56.6820725Z       Processing request for user: alice
2025-10-11T01:28:56.7125098Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:56.7125770Z       Failed executing DbCommand (70ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:28:56.7125833Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:28:56.7125885Z       FROM [MenuItems] AS [m]
2025-10-11T01:28:56.7433197Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:56.7433890Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:56.7433956Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:56.7559033Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.7926685Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.7926856Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7926915Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7926973Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7927032Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.7927083Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7927144Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7927204Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7927337Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.7927405Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.7927463Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.7927515Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:56.7927565Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:56.7927618Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:56.7927672Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:56.7927735Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:28:56.7927788Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:56.7927868Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.7927926Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.7927983Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7928034Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7928090Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7928144Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.7928195Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7928256Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7928315Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7928377Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.7928464Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.7928520Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.7928570Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:56.7928619Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:56.7928672Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:56.7928725Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:56.7928779Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:56.7929273Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.7929338Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.7929420Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7929472Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7929528Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7929582Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.7929634Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7929694Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7929754Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7929814Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.7929878Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.7929958Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.7930012Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:56.7930062Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:56.7930114Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:56.7930167Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:56.7930226Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.7930278Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.7930335Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7930385Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7930441Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.7930519Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.7930572Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.7930631Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7930691Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.7930751Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.7930815Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.7930870Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.8422982Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:56.8424355Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:56.8424461Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:28:56.8424520Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:28:56.8424574Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.8424627Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.8424684Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8424735Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8424790Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8424846Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.8424896Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8424978Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425041Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425102Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425165Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425220Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.8425278Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425337Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8425391Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:56.8425443Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:28:56.8425513Z       Error Number:208,State:1,Class:16
2025-10-11T01:28:56.8425567Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:28:56.8425621Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:28:56.8425676Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.8425729Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.8425787Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8425838Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8425894Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8425949Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.8426000Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8426081Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426141Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426202Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426266Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426797Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.8426861Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426921Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8426975Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:56.8427043Z fail: Function.GetMenu.User[0]
2025-10-11T01:28:56.8427100Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:28:56.8427155Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:28:56.8427212Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8427263Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8427319Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:28:56.8427374Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:28:56.8427425Z       --- End of stack trace from previous location ---
2025-10-11T01:28:56.8427485Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427567Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427631Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427695Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427751Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:28:56.8427810Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427870Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:28:56.8427924Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:28:56.8427973Z info: Function.GetMenu[2]
2025-10-11T01:28:56.8428028Z       Executed 'Functions.GetMenu' (Succeeded, Id=623af8f0-0888-4543-a14b-7a97080c2594, Duration=280ms)
2025-10-11T01:29:12.0899325Z info: Function.GetMenu[1]
2025-10-11T01:29:12.0899979Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=eaced207-b2d1-4b1d-9e3c-3d648cbf0c6b)
2025-10-11T01:29:12.5204352Z info: Function.GetMenu.User[0]
2025-10-11T01:29:12.5205179Z       === GetMenu function started ===
2025-10-11T01:29:12.5293451Z info: Function.GetMenu.User[0]
2025-10-11T01:29:12.5293676Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:29:12.5372448Z info: Function.GetMenu.User[0]
2025-10-11T01:29:12.5372652Z       Processing request for user: alice
2025-10-11T01:29:12.5372714Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:12.5372771Z       Failed executing DbCommand (72ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:29:12.5372858Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:29:12.5372910Z       FROM [MenuItems] AS [m]
2025-10-11T01:29:12.5971414Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:12.5971875Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:12.5971938Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:12.5971993Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.5972046Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.5972105Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5972163Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5972247Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5972308Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.5972359Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5972419Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5972481Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5972542Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.5972606Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.5972662Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.5972714Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:12.5972787Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:12.5972842Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:12.5972896Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:12.5972957Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:12.5973010Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:12.5973065Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.5973119Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.5973176Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5973228Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5973285Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5973360Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.5973412Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5973473Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5973534Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5973594Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.5973657Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.5973963Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.5974024Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:12.5974074Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:12.5974146Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:12.5974523Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:12.5974585Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:12.5974640Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.5974692Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.5974750Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5974800Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5974857Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5974912Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.5974981Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5975044Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5975104Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5975165Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.5975228Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.5975283Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.5975334Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:12.5975383Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:12.5975436Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:12.5975509Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:12.5975567Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.5975620Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.5975677Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5975728Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5975784Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.5975839Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.5975889Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.5975950Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.5976010Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.6495120Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.6495452Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.6495524Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.7607340Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:12.7607722Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:12.7607795Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:12.7607855Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:12.7607909Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.7608031Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.7608094Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.7608147Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.7608202Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.7608258Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.7608307Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.7608369Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608430Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608494Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608578Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608635Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.7608694Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608751Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.7608805Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:12.7608857Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:12.7608908Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:12.7608961Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:12.7609016Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:12.7609071Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.7609150Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.7609208Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.7609259Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.7609316Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.7609371Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.7609421Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.7609482Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.7609542Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.7609603Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.7609689Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.7610139Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.7610204Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.7610267Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.7610320Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:12.8107807Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:12.8108174Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:12.8108236Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:12.8108352Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.8108410Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.8108468Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:12.8108524Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:12.8108575Z       --- End of stack trace from previous location ---
2025-10-11T01:29:12.8108636Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.8108696Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:12.8108756Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:12.8108821Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:12.8108903Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:12.8108965Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.8109025Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:12.8109079Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:12.8814594Z info: Function.GetMenu[2]
2025-10-11T01:29:12.8814973Z       Executed 'Functions.GetMenu' (Succeeded, Id=eaced207-b2d1-4b1d-9e3c-3d648cbf0c6b, Duration=779ms)
2025-10-11T01:29:28.1972436Z info: Function.GetMenu[1]
2025-10-11T01:29:28.1972864Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=83caa66b-335f-443d-83a3-9a8206979dd8)
2025-10-11T01:29:28.3231490Z info: Function.GetMenu.User[0]
2025-10-11T01:29:28.3232106Z       === GetMenu function started ===
2025-10-11T01:29:28.4039570Z info: Function.GetMenu.User[0]
2025-10-11T01:29:28.4039975Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:29:28.8972133Z info: Function.GetMenu.User[0]
2025-10-11T01:29:28.8975799Z       Processing request for user: alice
2025-10-11T01:29:29.0854233Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:29.0854871Z       Failed executing DbCommand (139ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:29:29.0854941Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:29:29.0854993Z       FROM [MenuItems] AS [m]
2025-10-11T01:29:29.0855042Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:29.0855101Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:29.0855156Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0855212Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0855266Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0855324Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0855377Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0855455Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0855514Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0855566Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0855627Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0855687Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0855748Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0855812Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0855869Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0855922Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:29.0855972Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:29.0856053Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:29.0856109Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:29.0856170Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:29.0856224Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0856278Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0856334Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0856390Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0856441Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0856497Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0856570Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0856623Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0856682Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0856740Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0856801Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0856863Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0857359Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0857416Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:29.0857465Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:29.0857541Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:29.0857596Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:29.0857649Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0857703Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0857754Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0857810Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0857861Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0857916Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0857969Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0858019Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0858103Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0870249Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0870597Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0870666Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0870727Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0870780Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:29.0870831Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:29.0870884Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:29.0870938Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:29.0871057Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0871113Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0871170Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0871221Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0871276Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0871333Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0871384Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0871444Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0871503Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0871587Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0871652Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0871709Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0871758Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:29.0871821Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0871881Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0872458Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:29.0872522Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0872576Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0872653Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0872705Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0872762Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0872818Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0872867Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0872926Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0872986Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0873046Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0873108Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0873184Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0873244Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.0873303Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.0873358Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:29.0873408Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:29.0873459Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:29.0873512Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:29.0873566Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:29.0873621Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.0873674Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.0873749Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0873801Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0873857Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.0873911Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.0873961Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.0874020Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874079Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874139Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874201Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874276Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.0874334Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874483Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.0874542Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:29.1851572Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:29.1851961Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:29.1852023Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:29.1852082Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.1852203Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.1852263Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:29.1852320Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:29.1852371Z       --- End of stack trace from previous location ---
2025-10-11T01:29:29.1852432Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.1852492Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:29.1852554Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:29.1852619Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:29.1852675Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:29.1852968Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.1853035Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:29.1853090Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:29.1853139Z info: Function.GetMenu[2]
2025-10-11T01:29:29.1853195Z       Executed 'Functions.GetMenu' (Succeeded, Id=83caa66b-335f-443d-83a3-9a8206979dd8, Duration=980ms)
2025-10-11T01:29:44.5719552Z info: Function.GetMenu[1]
2025-10-11T01:29:44.5720243Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=18787735-761d-4c22-8c1a-71aa4ac8987a)
2025-10-11T01:29:44.8900827Z info: Function.GetMenu.User[0]
2025-10-11T01:29:44.8901599Z       === GetMenu function started ===
2025-10-11T01:29:44.9668611Z info: Function.GetMenu.User[0]
2025-10-11T01:29:44.9761041Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:29:44.9782639Z info: Function.GetMenu.User[0]
2025-10-11T01:29:44.9782773Z       Processing request for user: alice
2025-10-11T01:29:45.0094426Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:45.0094859Z       Failed executing DbCommand (198ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:29:45.0094926Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:29:45.0094978Z       FROM [MenuItems] AS [m]
2025-10-11T01:29:45.2491191Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:45.3271035Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:45.3477485Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:45.3477671Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.3477729Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.3477789Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3477841Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3477896Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3477951Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.3478001Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3478060Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3478123Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3478212Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.3478278Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.3478333Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.3478386Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:45.3478436Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:45.3478489Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:45.3478542Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:45.3478603Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:29:45.3478655Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:45.3478731Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.3478785Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.3478841Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3478891Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3478945Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3478999Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.3479052Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3479110Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3479169Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3479248Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.3479313Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.3479369Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.3479420Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:45.3479468Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:45.3479521Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:45.3481025Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:45.3481122Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:45.3481177Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.3481260Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.3481320Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3481372Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3481428Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3481484Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.3481534Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3481593Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3481651Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3481711Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.3481797Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.3481854Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.3481905Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:45.3481955Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:45.3482007Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:45.3482060Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:45.3482115Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.3482168Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.3482225Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3482274Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3482348Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.3482405Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.3482455Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.3482517Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3482576Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.3482636Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.3482699Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.3482753Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.5351662Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:45.5568569Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:45.5568742Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:29:45.5568804Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:29:45.5568859Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.5568913Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.5568972Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5569023Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5569079Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5569134Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.5569184Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5569342Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569403Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569464Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569527Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569582Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.5569640Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569699Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5569753Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:45.5569833Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:29:45.5569885Z       Error Number:208,State:1,Class:16
2025-10-11T01:29:45.5569938Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:29:45.5569994Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:29:45.5570048Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.5570101Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.5570158Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5570209Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5570265Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5570320Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.5570392Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5570455Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5570514Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5570574Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.5570637Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571051Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.5571117Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571175Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571253Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:45.5571306Z fail: Function.GetMenu.User[0]
2025-10-11T01:29:45.5571361Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:29:45.5571414Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:29:45.5571470Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5571520Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5571576Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:29:45.5571630Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:29:45.5571680Z       --- End of stack trace from previous location ---
2025-10-11T01:29:45.5571740Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571822Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571883Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:29:45.5571946Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:29:45.5572001Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:29:45.5572060Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5572116Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:29:45.5572169Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:29:45.6053544Z info: Function.GetMenu[2]
2025-10-11T01:29:45.6061536Z       Executed 'Functions.GetMenu' (Succeeded, Id=18787735-761d-4c22-8c1a-71aa4ac8987a, Duration=942ms)
2025-10-11T01:30:00.7249473Z info: Function.GetMenu[1]
2025-10-11T01:30:00.7250102Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=d914a08d-f870-4a62-a802-35661f54e4b7)
2025-10-11T01:30:00.7702039Z info: Function.GetMenu.User[0]
2025-10-11T01:30:00.7702724Z       === GetMenu function started ===
2025-10-11T01:30:00.7928613Z info: Function.GetMenu.User[0]
2025-10-11T01:30:00.7929463Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:30:00.8097442Z info: Function.GetMenu.User[0]
2025-10-11T01:30:00.8097915Z       Processing request for user: alice
2025-10-11T01:30:00.8811835Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:00.8812611Z       Failed executing DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:30:00.8812679Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:30:00.8812733Z       FROM [MenuItems] AS [m]
2025-10-11T01:30:00.9335462Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:00.9336467Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:00.9336534Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9349842Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9350179Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9361122Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9361487Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9361716Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9430481Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9430927Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9827052Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9827486Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9827559Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9827627Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9827790Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9827847Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:00.9827897Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:00.9827950Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:00.9828004Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:00.9828066Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:00.9828119Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9828174Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9828227Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9828290Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9828365Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9828424Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9828480Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9828530Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9828589Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9828648Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9828709Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9828772Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9828827Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9828903Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:00.9828954Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:00.9829008Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:00.9829061Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:00.9829115Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9829169Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9829222Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9829278Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9829328Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9829388Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9829463Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9829515Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9829928Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9829994Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9830055Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9830117Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9830172Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9830223Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:00.9830293Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:00.9830348Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:00.9830402Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:00.9830456Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9830509Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9830564Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9830614Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9830669Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9830723Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9830773Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9830852Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9830913Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9830973Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9831036Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9831090Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9831140Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:00.9831203Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9831262Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9831317Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:00.9831390Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9831446Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9831502Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9831552Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9831607Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9831662Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9831712Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9831771Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9831830Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9831913Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9832066Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9832126Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9832185Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:00.9832243Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:00.9832297Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:00.9832348Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:00.9832397Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:00.9832452Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:00.9832505Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:00.9832581Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:00.9832636Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:00.9832692Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9832742Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9832797Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:00.9832852Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:00.9832902Z       --- End of stack trace from previous location ---
2025-10-11T01:30:00.9832961Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833020Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833099Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833163Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833219Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:00.9833276Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833334Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:00.9833387Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:01.0247219Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:01.0247747Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:01.0247812Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:01.0247920Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:01.0247975Z       --- End of stack trace from previous location ---
2025-10-11T01:30:01.0248036Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:01.0248091Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:01.0248193Z       --- End of stack trace from previous location ---
2025-10-11T01:30:01.0248260Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248319Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248381Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248446Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248502Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:01.0248561Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248618Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:01.0248673Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:01.0860835Z info: Function.GetMenu[2]
2025-10-11T01:30:01.0861319Z       Executed 'Functions.GetMenu' (Succeeded, Id=d914a08d-f870-4a62-a802-35661f54e4b7, Duration=344ms)
2025-10-11T01:30:16.5815180Z info: Function.GetMenu[1]
2025-10-11T01:30:16.5815803Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=c0ad27b4-872e-4536-a8ca-5069aa621416)
2025-10-11T01:30:16.7011461Z info: Function.GetMenu.User[0]
2025-10-11T01:30:16.7012101Z       === GetMenu function started ===
2025-10-11T01:30:16.7107805Z info: Function.GetMenu.User[0]
2025-10-11T01:30:16.7108088Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:30:16.7108148Z info: Function.GetMenu.User[0]
2025-10-11T01:30:16.7108273Z       Processing request for user: alice
2025-10-11T01:30:16.8671129Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:16.8671525Z       Failed executing DbCommand (107ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:30:16.8671592Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:30:16.8671646Z       FROM [MenuItems] AS [m]
2025-10-11T01:30:16.9250585Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:16.9251300Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:16.9251367Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9251427Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9251483Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9251633Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9251689Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9251745Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9251799Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9251849Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9251910Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9251970Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9252031Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9252120Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9252178Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9252232Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:16.9252281Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:16.9252335Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:16.9252389Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:16.9252450Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:16.9252504Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9252559Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9252612Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9252695Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9252748Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9252805Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9252859Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9252909Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9252969Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9253028Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9253088Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9253152Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9253233Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9253287Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:16.9253337Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:16.9253390Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:16.9253946Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:16.9254009Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9254063Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9254116Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9254172Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9254223Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9254303Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9254359Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9254409Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9254468Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9254527Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9254587Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9254651Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9254707Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9254758Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:16.9254828Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:16.9254882Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:16.9254936Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:16.9254990Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9255044Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9255100Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9255154Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9255210Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9255265Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9255340Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9255402Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9255461Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9255521Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9255584Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9255640Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9707977Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:16.9708352Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9708426Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9708558Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:16.9708615Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9708669Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9708726Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9708782Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9708838Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9708893Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9708943Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9709003Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709084Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709149Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709213Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709270Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9709329Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709386Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9709441Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:16.9709493Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:16.9709543Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:16.9709597Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:16.9709672Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:16.9709729Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9709782Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9709838Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9709890Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9709945Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9710000Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9710051Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9710111Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710196Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710259Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710322Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710643Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9710707Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710765Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9710820Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:16.9710868Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:16.9710924Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:16.9710999Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:16.9711058Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9711109Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9711165Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:16.9711219Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:16.9711271Z       --- End of stack trace from previous location ---
2025-10-11T01:30:16.9711330Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711389Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711449Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711534Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711592Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:16.9711651Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711709Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:16.9711763Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:17.0532628Z info: Function.GetMenu[2]
2025-10-11T01:30:17.0533015Z       Executed 'Functions.GetMenu' (Succeeded, Id=c0ad27b4-872e-4536-a8ca-5069aa621416, Duration=442ms)
2025-10-11T01:30:32.3655042Z info: Function.GetMenu[1]
2025-10-11T01:30:32.3655744Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=c3a02038-7c84-4482-8385-eb5b7d02ac7f)
2025-10-11T01:30:32.4452572Z info: Function.GetMenu.User[0]
2025-10-11T01:30:32.4453331Z       === GetMenu function started ===
2025-10-11T01:30:32.4631671Z info: Function.GetMenu.User[0]
2025-10-11T01:30:32.4632012Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:30:32.4632074Z info: Function.GetMenu.User[0]
2025-10-11T01:30:32.4632125Z       Processing request for user: alice
2025-10-11T01:30:32.5550571Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:32.5551321Z       Failed executing DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:30:32.5551389Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:30:32.5551544Z       FROM [MenuItems] AS [m]
2025-10-11T01:30:32.5939621Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:32.5940150Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:32.5940212Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:32.6050137Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.6050393Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.6050461Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6050523Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6050582Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6050694Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.6050750Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6050810Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6115436Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6115523Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.6115591Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.6115648Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.6115700Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:32.6115751Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:32.6115830Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:32.6115888Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:32.6115952Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:32.6116005Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:32.6116060Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.6116114Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.6116172Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6116224Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6116280Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6116335Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.6116648Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6116714Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6116773Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6116835Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.6116899Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.6116954Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.6117006Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:32.6117056Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:32.6117110Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:32.6117186Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:32.6117242Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:32.6117692Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.6117753Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.6117810Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6117861Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6117917Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6117974Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.6118024Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6118105Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6118168Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6118228Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.6118291Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.6118347Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.6118397Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:32.6118447Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:32.6118498Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:32.6118551Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:32.6118624Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.6118678Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.6118736Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6118786Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6118842Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.6118897Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.6118947Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.6119006Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6119065Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.6119126Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.6119207Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.6119263Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.7029065Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:32.7029500Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:32.7029572Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:32.7029628Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:32.7029683Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.7029737Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.7029797Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7029944Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7030002Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7030058Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.7030108Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7030168Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030228Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030289Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030352Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030409Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.7030495Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030556Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7030610Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:32.7030661Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:32.7030712Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:32.7030764Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:32.7030818Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:32.7030874Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.7030926Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.7031002Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7031054Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7031110Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7031165Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.7031215Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7031274Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7031333Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7031393Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.7031456Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.7031920Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.7031985Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7032043Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7032097Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:32.7032146Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:32.7032201Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:32.7032255Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:32.7145588Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7145895Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7146036Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:32.7146097Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:32.7146150Z       --- End of stack trace from previous location ---
2025-10-11T01:30:32.7146211Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146271Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146331Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146395Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146451Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:32.7146510Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146595Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:32.7146651Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:32.7146699Z info: Function.GetMenu[2]
2025-10-11T01:30:32.7146755Z       Executed 'Functions.GetMenu' (Succeeded, Id=c3a02038-7c84-4482-8385-eb5b7d02ac7f, Duration=338ms)
2025-10-11T01:30:47.8691419Z info: Function.GetMenu[1]
2025-10-11T01:30:47.8692037Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=5d9d67b9-f6fc-45a4-bec6-5e9f07641c81)
2025-10-11T01:30:47.9399791Z info: Function.GetMenu.User[0]
2025-10-11T01:30:47.9400554Z       === GetMenu function started ===
2025-10-11T01:30:47.9495093Z info: Function.GetMenu.User[0]
2025-10-11T01:30:47.9495323Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:30:47.9495417Z info: Function.GetMenu.User[0]
2025-10-11T01:30:47.9495472Z       Processing request for user: alice
2025-10-11T01:30:48.0498675Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:48.0499093Z       Failed executing DbCommand (69ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:30:48.0499167Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:30:48.0499220Z       FROM [MenuItems] AS [m]
2025-10-11T01:30:48.0499270Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:48.0499328Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:48.0499382Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:48.0499436Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.0499581Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.0499642Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0499694Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0499750Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0499806Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.0499857Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0499916Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0499976Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0500036Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.0500130Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.0500187Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.0500239Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:48.0500290Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:48.0500344Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:48.0500397Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:48.0500459Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:30:48.0500511Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:48.0500566Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.0500646Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.0500705Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0500756Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0500812Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0500866Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.0500917Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0500976Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0501034Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0501095Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.0501183Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.0501894Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.0501957Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:48.0502008Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:48.0502059Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:48.0502113Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:48.0502167Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:48.0502220Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.0502273Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.0502330Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0502404Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0502462Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0502517Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.0502566Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0502629Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0502687Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0502746Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.0502810Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.0502865Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.0502938Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:48.0502988Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:48.0503040Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:48.0503093Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:48.0503148Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.0503201Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.0503257Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0503306Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0503362Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.0503416Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.0503489Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.0503549Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0503607Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.0503667Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.0503729Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.0503783Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.1862892Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:48.1863263Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:48.1863412Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:30:48.1863475Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:30:48.1863529Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.1863583Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.1863641Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.1863692Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.1863748Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.1863803Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.1863854Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.1863915Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864001Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864064Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864128Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864184Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.1864242Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864300Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.1864356Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:48.1864409Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:30:48.1864460Z       Error Number:208,State:1,Class:16
2025-10-11T01:30:48.1864537Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:30:48.1864594Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:30:48.1864649Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.1864703Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.1864760Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.1864811Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.1864867Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.1864922Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.1864972Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.1865055Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865117Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865178Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865241Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865663Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.1865729Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865789Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.1865843Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:48.2093330Z fail: Function.GetMenu.User[0]
2025-10-11T01:30:48.2093657Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:30:48.2093719Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:30:48.2093778Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.2093833Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.2093890Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:30:48.2093945Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:30:48.2093995Z       --- End of stack trace from previous location ---
2025-10-11T01:30:48.2094056Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094115Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094204Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094270Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094327Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:30:48.2094387Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094445Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:30:48.2094500Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:30:48.2602462Z info: Function.GetMenu[2]
2025-10-11T01:30:48.2602851Z       Executed 'Functions.GetMenu' (Succeeded, Id=5d9d67b9-f6fc-45a4-bec6-5e9f07641c81, Duration=352ms)
2025-10-11T01:31:03.3501024Z info: Function.GetMenu[1]
2025-10-11T01:31:03.3501618Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=051bd5e0-890b-4112-b7f5-4e061b3fd9f9)
2025-10-11T01:31:03.3803268Z info: Function.GetMenu.User[0]
2025-10-11T01:31:03.3804023Z       === GetMenu function started ===
2025-10-11T01:31:03.3990040Z info: Function.GetMenu.User[0]
2025-10-11T01:31:03.3990440Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:31:03.4092443Z info: Function.GetMenu.User[0]
2025-10-11T01:31:03.4092664Z       Processing request for user: alice
2025-10-11T01:31:03.5087540Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:03.5088322Z       Failed executing DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:31:03.5088394Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:31:03.5088451Z       FROM [MenuItems] AS [m]
2025-10-11T01:31:03.5190995Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:03.5212492Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:03.5212716Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5212781Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5212837Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5212896Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5212949Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5213067Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5213125Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5213177Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5213238Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5213297Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5213359Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5603001Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5784687Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5784840Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:03.5784960Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:03.5785021Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:03.5785076Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:03.5785140Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:03.5785703Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5785768Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5785822Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5785880Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5785931Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5786012Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5786070Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5786120Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5786181Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5786240Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5786301Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5786365Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5786421Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5786472Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:03.5786545Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:03.5786600Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:03.5786654Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:03.5786708Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5786762Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5786816Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5786872Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5786924Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5786980Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5787035Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5787107Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5787168Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5787228Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5787289Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5787351Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5787406Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5787458Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:03.5787507Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:03.5787559Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:03.5787634Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:03.5787690Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5787743Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5787930Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5787987Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5788044Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5788098Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5788149Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5788208Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5788287Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5788352Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5788415Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5788470Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5788521Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:03.5788583Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5788643Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5788699Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:03.5801991Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5802197Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5802261Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5802317Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5802374Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5802429Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5802480Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5802541Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802600Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802660Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802748Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802805Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5802880Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802938Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5802991Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:03.5803043Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:03.5803093Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:03.5803146Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:03.5803199Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:03.5803252Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5803328Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5803773Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5803830Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5803888Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5803942Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5803993Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5804052Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804111Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804172Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804265Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804322Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5804380Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804438Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5804492Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:03.5804542Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:03.5804598Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:03.5804651Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:03.5804707Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5804781Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5804839Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:03.5804893Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:03.5804943Z       --- End of stack trace from previous location ---
2025-10-11T01:31:03.5805002Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805060Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805121Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805184Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805238Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:03.5805321Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805380Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:03.5805433Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:03.5805482Z info: Function.GetMenu[2]
2025-10-11T01:31:03.5805537Z       Executed 'Functions.GetMenu' (Succeeded, Id=051bd5e0-890b-4112-b7f5-4e061b3fd9f9, Duration=219ms)
2025-10-11T01:31:44.0471698Z info: Function.GetMenu[1]
2025-10-11T01:31:44.0472339Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=037719e9-e0f7-4831-86be-725b8fc02885)
2025-10-11T01:31:44.0696327Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.0696883Z       === GetMenu function started ===
2025-10-11T01:31:44.0960098Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.0960671Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:31:44.0960735Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.0960790Z       Processing request for user: alice
2025-10-11T01:31:44.2579504Z info: Function.GetMenu[1]
2025-10-11T01:31:44.2580195Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=53b14e40-8442-402a-9449-2554abb1acda)
2025-10-11T01:31:44.3957080Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.3958021Z       Failed executing DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:31:44.3958086Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:31:44.3958138Z       FROM [MenuItems] AS [m]
2025-10-11T01:31:44.4188802Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.4189203Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:44.4189270Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4189327Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4189381Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4189514Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4189571Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4189628Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4189682Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4189786Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4189848Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4189908Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4189969Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4190032Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4190120Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4190177Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.4190228Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.4190280Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.4190335Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.4190396Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:44.4190449Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4190503Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4190556Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4190614Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4190689Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4190746Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4190801Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4190852Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4190911Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4190970Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4191031Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4191094Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4191150Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4191227Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.4191278Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.4191330Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.4191720Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.4191781Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4191836Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4191889Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4191946Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4191996Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4192077Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4192135Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4192186Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4192245Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4192304Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4192365Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4192429Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4192484Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4192536Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.4192608Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.4192663Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.4192717Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.4192773Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4192830Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4192886Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4192936Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4192993Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4193048Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4193098Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4193184Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4193246Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4193306Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4193368Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4193423Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4193472Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.4193522Z       === GetMenu function started ===
2025-10-11T01:31:44.4193570Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.4193622Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:31:44.4193670Z info: Function.GetMenu.User[0]
2025-10-11T01:31:44.4193744Z       Processing request for user: alice
2025-10-11T01:31:44.4462774Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.4463110Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4463184Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4463244Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.4463298Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4463352Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4463409Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4463464Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4463549Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4463606Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4463658Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4463719Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4463778Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4464061Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4464128Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4464188Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4464247Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4464331Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4464388Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.4464441Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.4464491Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.4464546Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.4464601Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.4464656Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4464710Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4464766Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4464818Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4464896Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4464952Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4465002Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4465061Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465120Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465180Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465243Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465560Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4465644Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465705Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4465760Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.4465809Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.4465866Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.4465919Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.4465975Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4466027Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4466082Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.4466137Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.4466209Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.4466271Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466330Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466391Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466453Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466509Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.4466567Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466625Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.4466701Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.5259458Z info: Function.GetMenu[2]
2025-10-11T01:31:44.5259799Z       Executed 'Functions.GetMenu' (Succeeded, Id=037719e9-e0f7-4831-86be-725b8fc02885, Duration=389ms)
2025-10-11T01:31:44.6645522Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.6645972Z       Failed executing DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:31:44.6646035Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:31:44.6646086Z       FROM [MenuItems] AS [m]
2025-10-11T01:31:44.7247855Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.7248273Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:44.7248335Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7248489Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7248544Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7248601Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7248657Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7248712Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7248768Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7248819Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7248879Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7248938Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7249019Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7249085Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7249142Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7249194Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.7249390Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.7249447Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.7249500Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.7249568Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:44.7249622Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7249700Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7249757Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7249814Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7249865Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7249924Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7249978Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7250030Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7250089Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7250148Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7250231Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7250298Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7250353Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7250405Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.7250454Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.7250507Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.7250936Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.7250998Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7251052Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7251106Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7251184Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7251236Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7251292Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7251346Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7251397Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7251456Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7251516Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7251576Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7251639Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7251717Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7251770Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.7251819Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.7251872Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.7251925Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.7251981Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7252033Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7252089Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7252143Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7252199Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7252276Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7252327Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7252387Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7252446Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7252506Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7252569Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7252624Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7252673Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.7252736Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7252820Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7252876Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:44.7252931Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7252983Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7253128Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7253185Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7253241Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7253296Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7253346Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7253429Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253490Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253551Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253614Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253672Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7253730Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253788Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7253842Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.7253893Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:44.7253964Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:44.7254018Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:44.7254071Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:44.7254127Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7254180Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7254236Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7254286Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7254342Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7254396Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7254447Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7254526Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254587Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254647Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254712Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254767Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7254825Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254883Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7254935Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.7714306Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:44.7714723Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:44.7714788Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:44.7714846Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7714899Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7714958Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:44.7715014Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:44.7715065Z       --- End of stack trace from previous location ---
2025-10-11T01:31:44.7715125Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715256Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715322Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715387Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715444Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:44.7715503Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715561Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:44.7715617Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:44.7715666Z info: Function.GetMenu[2]
2025-10-11T01:31:44.7715724Z       Executed 'Functions.GetMenu' (Succeeded, Id=53b14e40-8442-402a-9449-2554abb1acda, Duration=552ms)
2025-10-11T01:31:58.4989311Z info: Function.GetMenu[1]
2025-10-11T01:31:58.4989792Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=9c3e3453-f966-4e1b-9772-d521f8a5a019)
2025-10-11T01:31:58.5778445Z info: Function.GetMenu.User[0]
2025-10-11T01:31:58.5778832Z       === GetMenu function started ===
2025-10-11T01:31:58.6385041Z info: Function.GetMenu.User[0]
2025-10-11T01:31:58.6385429Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T01:31:58.6385488Z info: Function.GetMenu.User[0]
2025-10-11T01:31:58.6385548Z       Processing request for user: alice
2025-10-11T01:31:58.7284302Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:58.7284812Z       Failed executing DbCommand (159ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
2025-10-11T01:31:58.7284883Z       SELECT [m].[Id], [m].[Description], [m].[Icon], [m].[Name], [m].[Url]
2025-10-11T01:31:58.7284935Z       FROM [MenuItems] AS [m]
2025-10-11T01:31:58.8158286Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:58.8158671Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:58.8158734Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8158790Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8158844Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8158902Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8158958Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8159100Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8159160Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8159212Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8159273Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8159333Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8159394Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8159460Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8159517Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8159569Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:58.8159645Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:58.8160733Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:58.8160808Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:58.8160870Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T01:31:58.8160923Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8160978Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8161031Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8161087Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8161138Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8161229Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8161288Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8161339Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8161398Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8161457Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8161517Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8161580Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8161635Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8161686Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:58.8161735Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:58.8161810Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:58.8162156Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:58.8162218Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8162273Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8162327Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8162384Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8162434Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8162491Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8162545Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8162617Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8162680Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8162740Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8162800Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8162864Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8162920Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8162971Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:58.8163023Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:58.8163075Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:58.8163156Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:58.8163213Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8163266Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8163322Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8163373Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8163429Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8163483Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8163533Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8163592Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8163651Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8163741Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8163805Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8163861Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8163910Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:58.8163972Z       ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8164033Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8164086Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'MenuItems'.
2025-10-11T01:31:58.8164140Z          at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8164193Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8164373Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8164428Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8164485Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8164539Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8164590Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8164650Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8164709Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8164768Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8164856Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8164913Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8164973Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8165031Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8165086Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:58.8165137Z       ClientConnectionId:46b5685d-5a24-4f87-a69c-07adf3b73e10
2025-10-11T01:31:58.8165185Z       Error Number:208,State:1,Class:16
2025-10-11T01:31:58.8165237Z       ClientConnectionId before routing:54d37f8a-f4a0-497d-9af4-1ee1d2527c79
2025-10-11T01:31:58.8165291Z       Routing Destination:b2581b6f0b6d.tr10017.westus2-a.worker.database.windows.net,11011
2025-10-11T01:31:58.8165346Z       Stack:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8165423Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8165481Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8165533Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8165589Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8165644Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8165694Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8165754Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8165812Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8165873Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8165954Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166012Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8166071Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166129Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166183Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:58.8166231Z fail: Function.GetMenu.User[0]
2025-10-11T01:31:58.8166366Z       Stack trace:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
2025-10-11T01:31:58.8166424Z          at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
2025-10-11T01:31:58.8166481Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8166552Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8166612Z          at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-11T01:31:58.8166666Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-11T01:31:58.8166716Z       --- End of stack trace from previous location ---
2025-10-11T01:31:58.8166776Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166834Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166894Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T01:31:58.8166958Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T01:31:58.8167013Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T01:31:58.8167091Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8167151Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T01:31:58.8167205Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T01:31:58.8167254Z info: Function.GetMenu[2]
2025-10-11T01:31:58.8167310Z       Executed 'Functions.GetMenu' (Succeeded, Id=9c3e3453-f966-4e1b-9772-d521f8a5a019, Duration=287ms)
2025-10-11T10:59:22.9211825Z info: Function.GetMenu[1]
2025-10-11T10:59:22.9298908Z       Executing 'Functions.GetMenu' (Reason='This function was programmatically called via the host APIs.', Id=a90def75-d60d-42ef-b033-3bc0fe0bf096)
2025-10-11T10:59:24.9264075Z info: Function.GetMenu.User[0]
2025-10-11T10:59:24.9265118Z       === GetMenu function started ===
2025-10-11T10:59:25.4005309Z info: Function.GetMenu.User[0]
2025-10-11T10:59:25.4006090Z       OpenFGA Client StoreId: 01K785TE28A2Z3NWGAABN1TE8E
2025-10-11T10:59:25.4389680Z info: Function.GetMenu.User[0]
2025-10-11T10:59:25.4473704Z       Processing request for user: alice
2025-10-11T10:59:40.1086109Z fail: Function.GetMenu.User[0]
2025-10-11T10:59:40.1086821Z       An error occurred using the connection to database 'db-menu-app' on server 'sqlsrv-menu-app-24259.database.windows.net'.
2025-10-11T10:59:40.3068909Z fail: Function.GetMenu.User[0]
2025-10-11T10:59:40.3069487Z       An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T10:59:40.3274779Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.3275185Z        ---> System.ComponentModel.Win32Exception (258): Unknown error 258
2025-10-11T10:59:40.3275257Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.3275382Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3275443Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3275499Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.3275552Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.3275606Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.3275660Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.3275712Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.3275778Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.3275839Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.3275916Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.3276062Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.3276134Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.3276201Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.3276282Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.3276348Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3276412Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3276494Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3276557Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3276986Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.3277046Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.3277099Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.3277158Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3277217Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3277278Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.3277338Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.3277420Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.3277485Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.3277542Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.3277595Z       ClientConnectionId:071cd57a-b099-45ea-afc7-5ac1a07e0545
2025-10-11T10:59:40.3277645Z       Error Number:-2,State:0,Class:11
2025-10-11T10:59:40.3277707Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: An exception occurred while iterating over the results of a query for context type 'MenuApi.Data.ApplicationDbContext'.
2025-10-11T10:59:40.3277797Z       Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.3277849Z        ---> System.ComponentModel.Win32Exception (258): Unknown error 258
2025-10-11T10:59:40.3277928Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.3277990Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3278048Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3278106Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.3278159Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.3278212Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.3278266Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.3278319Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.3278383Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.3278465Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.3278521Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.3278586Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.3278654Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.3278812Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.3278897Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.3278964Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3279047Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3279111Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3279170Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3279237Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.3279289Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.3279340Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.3279399Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3279457Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3279514Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.3279600Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.3279664Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.3279727Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.3279782Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.3279834Z       ClientConnectionId:071cd57a-b099-45ea-afc7-5ac1a07e0545
2025-10-11T10:59:40.3279883Z       Error Number:-2,State:0,Class:11
2025-10-11T10:59:40.3279971Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.3280376Z        ---> System.ComponentModel.Win32Exception (258): Unknown error 258
2025-10-11T10:59:40.3280468Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.3280529Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3280687Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3280747Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.3280800Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.3280856Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.3280909Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.3280962Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.3281027Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.3281110Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.3281166Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.3281230Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.3492798Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.3582870Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.3583016Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.3583088Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3583183Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3583247Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3583307Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3583374Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.3583427Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.3583480Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.3583538Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3583596Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3583675Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.3583738Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.3583800Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.3583864Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.3583920Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.3583974Z       ClientConnectionId:071cd57a-b099-45ea-afc7-5ac1a07e0545
2025-10-11T10:59:40.3584024Z       Error Number:-2,State:0,Class:11
2025-10-11T10:59:40.3584082Z       Stack:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.3584141Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3584216Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.3584275Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.3584329Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.3584381Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.3584766Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.3584829Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.3584894Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.3584957Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.3585011Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.3585101Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.3585171Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.3585237Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.3585318Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.3585385Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3585448Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.3585509Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3585590Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.3585658Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.3585712Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.3585763Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.3585822Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3585880Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.3585937Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.3585997Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.3586079Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.3586146Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.3586300Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.9108538Z fail: Function.GetMenu.User[0]
2025-10-11T10:59:40.9109233Z       ❌ FATAL ERROR in GetMenu: Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.9109340Z       Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException: Result: ❌ FATAL ERROR in GetMenu: Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.9109586Z       Exception: Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=245; handshake=3205; [Login] initialization=1; authentication=1; [Post-Login] complete=11233; 
2025-10-11T10:59:40.9109645Z        ---> System.ComponentModel.Win32Exception (258): Unknown error 258
2025-10-11T10:59:40.9109705Z          at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.9109765Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9109822Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9109878Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.9109933Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.9109986Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.9110039Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.9110118Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.9110185Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.9110247Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.9110301Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.9110365Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.9110433Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.9110498Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.9111010Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.9111085Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9111149Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9111210Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9111270Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9111337Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.9111390Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.9111442Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.9111518Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111578Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111636Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.9111697Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111758Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111821Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111877Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.9111935Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9111992Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9112066Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T10:59:40.9112119Z       ClientConnectionId:071cd57a-b099-45ea-afc7-5ac1a07e0545
2025-10-11T10:59:40.9112170Z       Error Number:-2,State:0,Class:11
2025-10-11T10:59:40.9112228Z       Stack:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.9112285Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9112345Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9112400Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.9112453Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.9112506Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.9112578Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.9112633Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.9386544Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.9389168Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.9389332Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.9389406Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.9389476Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.9389543Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.9389650Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.9389719Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9389783Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9389843Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9389906Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9389974Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.9390026Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.9390080Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.9390171Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9390230Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9390288Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.9390347Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.9390409Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.9390473Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.9390529Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.9390588Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9454691Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9454913Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T10:59:40.9454971Z fail: Function.GetMenu.User[0]
2025-10-11T10:59:40.9455032Z       Stack trace:    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
2025-10-11T10:59:40.9455094Z          at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9455151Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
2025-10-11T10:59:40.9455207Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
2025-10-11T10:59:40.9455261Z          at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
2025-10-11T10:59:40.9455314Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
2025-10-11T10:59:40.9455426Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
2025-10-11T10:59:40.9455485Z          at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
2025-10-11T10:59:40.9455549Z          at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
2025-10-11T10:59:40.9455612Z          at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
2025-10-11T10:59:40.9455667Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
2025-10-11T10:59:40.9455732Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
2025-10-11T10:59:40.9455801Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
2025-10-11T10:59:40.9455868Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
2025-10-11T10:59:40.9455973Z          at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
2025-10-11T10:59:40.9456041Z          at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9456106Z          at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
2025-10-11T10:59:40.9456166Z          at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9456226Z          at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
2025-10-11T10:59:40.9456292Z          at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
2025-10-11T10:59:40.9456346Z          at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
2025-10-11T10:59:40.9456398Z       --- End of stack trace from previous location ---
2025-10-11T10:59:40.9456718Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9456782Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2025-10-11T10:59:40.9456839Z          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
2025-10-11T10:59:40.9456899Z          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
2025-10-11T10:59:40.9456961Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
2025-10-11T10:59:40.9457026Z          at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
2025-10-11T10:59:40.9457082Z          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-11T10:59:40.9457141Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9457221Z          at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
2025-10-11T10:59:40.9457278Z          at MenuApi.MenuFunction.GetMenu(HttpRequestData req) in /src/MenuFunction.cs:line 40
2025-10-11T10:59:41.0277024Z info: Function.GetMenu[2]
2025-10-11T10:59:41.0277626Z       Executed 'Functions.GetMenu' (Succeeded, Id=a90def75-d60d-42ef-b033-3bc0fe0bf096, Duration=18178ms)
